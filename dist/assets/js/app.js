"use strict";var trademachines,elem={},domReady=function(e){"interactive"===document.readyState||"complete"===document.readyState?e():document.addEventListener("DOMContentLoaded",e)};!function(){trademachines={initDom:function(){elem.postList=document.querySelector(".post-list"),elem.headerSearch=document.querySelector(".header-search-field"),elem.viewSwitchGrid=document.querySelector(".js-switch-grid"),elem.viewSwitchList=document.querySelector(".js-switch-list"),elem.ajaxFireCount=0,elem.tagList,elem.postImageList},events:function(){function e(e){var t=e.target.value;trademachines.loadAJAX(t)}elem.headerSearch.onkeyup=e,elem.viewSwitchGrid.addEventListener("click",function(e){elem.postList.classList.contains("grid-view")||elem.postList.classList.add("grid-view"),elem.postList.classList.remove("list-view")}),elem.viewSwitchList.addEventListener("click",function(e){elem.postList.classList.contains("list-view")||elem.postList.classList.add("list-view"),elem.postList.classList.remove("grid-view")})},loadAJAX:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new XMLHttpRequest;t.open("GET","https://jsonplaceholder.typicode.com/posts"),t.onload=function(){if(4==t.readyState&&200==t.status){var i=JSON.parse(t.responseText);trademachines.renderList(i,e)}else console.log("Server returned an error")},t.onerror=function(){console.log("AJAX failed")},t.send()},renderList:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=new RegExp(t,""),s="";0==elem.ajaxFireCount&&(elem.tagList=trademachines.getRandomNounList(e.length),elem.postImageList=trademachines.getRandomImages(e.length)),elem.ajaxFireCount++;var a=elem.tagList,n=elem.postImageList;for(var o in e){var l=e[o],r=a["item"+o];if(l.title.search(i)!=-1||0==t){s+='<li class="ccol-xs-6 col-sm-4 col-lg-4 media post-list-item">',s+='<div class="post-list-image"><img class="img-fluid" src="'+n[o]+'" alt="Generic placeholder image"></div>',s+='<div class="media-body">',s+="<h5>"+l.title+"</h5>",s+='<ul class="nav tag-list">';for(var c=0;r.length>c;c++)s+='<li class="nav-item tag-list-item"><a class="nav-link active" href="#"><i class="icon-tag"></i>'+r[c]+"</a></li>";s+="</ul>",s+="<p>"+l.body+"</p>",s+='<div class="post-list-action"><a href="#" class="btn btn-primary">Call to Action</a></div>',s+="</div>",s+="<li>"}}elem.postList.innerHTML=s},getRandomInt:function(e,t){return Math.floor(Math.random()*(t-e+1))+e},getRandomNounList:function(){function e(){return i[Math.floor(Math.random()*i.length)]}for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,i=["women","men","children","teeth","feet","people","leaves","mice","geese","halves","knives","wives","lives","elves","loaves","potatoes","tomatoes","cacti","foci","fungi","nuclei","syllabuses","analyses","diagnoses","oases","theses","crises","phenomena","criteria","data"],s={},a=0;t>a;a++){for(var n=[],o=0;trademachines.getRandomInt(1,3)>o;o++)n.push(e());s["item"+a]=n}return s},getRandomImages:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t=[],i=0;e>i;i++)t.push("https://unsplash.it/300/300?image="+trademachines.getRandomInt(800,900));return t}},domReady(function(){trademachines.initDom(),trademachines.events(),trademachines.loadAJAX()})}();