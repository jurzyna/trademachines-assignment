"use strict";var trademachines,elem={},domReady=function(e){"interactive"===document.readyState||"complete"===document.readyState?e():document.addEventListener("DOMContentLoaded",e)};!function(){trademachines={initDom:function(){elem.postList=document.querySelector(".post-list"),elem.headerSearch=document.querySelector(".header-search-field"),elem.ajaxFireCount=0,elem.tagList,elem.postImageList},events:function(){function e(e){var t=e.target.value;trademachines.loadAJAX(t)}elem.headerSearch.onkeyup=e},loadAJAX:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new XMLHttpRequest;t.open("GET","https://jsonplaceholder.typicode.com/posts"),t.onload=function(){if(4==t.readyState&&200==t.status){var a=JSON.parse(t.responseText);trademachines.renderList(a,e)}else console.log("Server returned an error")},t.onerror=function(){console.log("AJAX failed")},t.send()},renderList:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=new RegExp(t,""),n="";0==elem.ajaxFireCount&&(elem.tagList=trademachines.getRandomNounList(e.length),elem.postImageList=trademachines.getRandomImages(e.length)),elem.ajaxFireCount++;var i=elem.tagList,s=elem.postImageList;for(var o in e){var r=e[o],l=i["item"+o];if(r.title.search(a)!=-1||0==t){n+='<li class="media post-list-item">',n+='<div class="media-body">',n+="<h5>"+r.title+"</h5>",n+='<ul class="nav tag-list">';for(var d=0;l.length>d;d++)n+='<li class="nav-item tag-list-item"><a class="nav-link active" href="#"><i class="icon-tag"></i>'+l[d]+"</a></li>";n+="</ul>",n+="<p>"+r.body+"</p>",n+='<div class="post-list-action"><a href="#" class="btn btn-primary">Call to Action</a></div>',n+="</div>",n+='<div class="post-list-image"><img class="img-fluid" src="'+s[o]+'" alt="Generic placeholder image"></div>',n+="<li>"}}elem.postList.innerHTML=n},getRandomInt:function(e,t){return Math.floor(Math.random()*(t-e+1))+e},getRandomNounList:function(){function e(){return a[Math.floor(Math.random()*a.length)]}for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,a=["women","men","children","teeth","feet","people","leaves","mice","geese","halves","knives","wives","lives","elves","loaves","potatoes","tomatoes","cacti","foci","fungi","nuclei","syllabuses","analyses","diagnoses","oases","theses","crises","phenomena","criteria","data"],n={},i=0;t>i;i++){for(var s=[],o=0;trademachines.getRandomInt(1,3)>o;o++)s.push(e());n["item"+i]=s}return n},getRandomImages:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t=[],a=0;e>a;a++)t.push("https://unsplash.it/200/200?image="+trademachines.getRandomInt(800,900));return t}},domReady(function(){trademachines.initDom(),trademachines.events(),trademachines.loadAJAX()})}(document);